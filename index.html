<!DOCTYPE html>
<html lang="es">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <link rel="stylesheet" type="text/css" href="./css/bootstrap.min.css">
        <link rel="stylesheet" href="./css/main.css">
        <script type="text/javascript" src="./js/jquery.js"></script>
        <script type="text/javascript" src="./js/bootstrap.min.js"></script>
        <script type="text/javascript" src="./js/bootstrap.js"></script>
        <script src="https://www.gstatic.com/firebasejs/4.2.0/firebase.js"></script>
        <script src="https://www.gstatic.com/firebasejs/4.5.0/firebase.js"></script>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>DronArg</title>
        <script language="JavaScript" type="text/javascript">
            
  $(document).ready(function(){
    $('.carousel').carousel({
      interval: 3000
    })
  });    
</script> 
<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyAWWbLdwxeKruNHslAZVoQ75MswvaeT2So",
    authDomain: "dronarg-3b230.firebaseapp.com",
    databaseURL: "https://dronarg-3b230.firebaseio.com",
    projectId: "dronarg-3b230",
    storageBucket: "",
    messagingSenderId: "892729595216"
  };
  firebase.initializeApp(config);
</script>
        <script>
   window.fbAsyncInit = function() {
      FB.init ({
         appId      : '2044624762432582',
         xfbml      : true,
         version    : 'v2.6'
      });
   };

   (function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) {return;}
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_US/sdk.js";
      fjs.parentNode.insertBefore(js, fjs);
   } (document, 'script', 'facebook-jssdk'));
	
</script>
        <script>
        var provider = new firebase.auth.FacebookAuthProvider();

function facebookSignin() {
   firebase.auth().signInWithPopup(provider)
   
   .then(function(result) {
      var token = result.credential.accessToken;
      var user = result.user;
		var displayName = user.displayName;
      console.log(token)
      console.log(user)
       console.log(displayName);
           if (user != null) {
  name = user.displayName;
  email = user.email;
  photoUrl = user.photoURL;
  emailVerified = user.emailVerified;
  uid = user.uid;
    document.getElementById("nombre").innerHTML= name;
           console.log(photoUrl);
    document.getElementById("foto").src= photoUrl;
           document.getElementById("boton").innerHTML = "Cerrar Sesion";
           //document.getElementById("boton").onclick= googleSignout();
}
   }).catch(function(error) {
      console.log(error.code);
      console.log(error.message);
   });

}
            function facebookSignout() {
   firebase.auth().signOut()
   
   .then(function() {
      console.log('Signout successful!')
   }, function(error) {
      console.log('Signout failed')
   });
}
        </script>
        <script>
        var provider1 = new firebase.auth.GoogleAuthProvider();

function googleSignin() {
   firebase.auth()
   
   .signInWithPopup(provider1).then(function(result) {
      var token = result.credential.accessToken;
      var user = result.user;

		
      console.log(token)
      console.log(user)
       if (user != null) {
  name = user.displayName;
  email = user.email;
  photoUrl = user.photoURL;
  emailVerified = user.emailVerified;
  uid = user.uid;
    document.getElementById("nombre").innerHTML= name;
           console.log(photoUrl);
    document.getElementById("foto").src= photoUrl;
           document.getElementById("boton").innerHTML = "Cerrar Sesion";
           //document.getElementById("boton").onclick= googleSignout();
}
       
   }).catch(function(error) {
      var errorCode = error.code;
      var errorMessage = error.message;
		
      console.log(error.code)
      console.log(error.message)
   });
}

function googleSignout() {
   firebase.auth().signOut()
	
   .then(function() {
      console.log('Signout Succesfull')
//       document.getElementById("boton").innerHTML = "Iniciar con Google";
//       document.getElementById("boton").onclick= googleSignin();
//       document.getElementById("foto").src= null;
//       document.getElementById("nombre").innerHTML= null;
   }, function(error) {
      console.log('Signout Failed')  
   });
}
        </script>
        <script>


function createWithEmailAndPassword(){
                var email;
                var password;
                email = document.getElementById("usr").value;
            password = document.getElementById("pwd").value;
firebase.auth().createUserWithEmailAndPassword(email, password).catch(function(error) {
   console.log(error.code);
   console.log(error.message);
});
    console.log(email);
    console.log(password);
}
 function signInWithEmailAndPassword(){   
                var email;
                var password;
                email = document.getElementById("usr").value;
            password = document.getElementById("pwd").value;
firebase.auth().signInWithEmailAndPassword(email, password).catch(function(error) {
   console.log(error.code);
   console.log(error.message);
});
 }
            function emailsignOut(){
    firebase.auth().signOut().then(function() {
   console.log("Logged out!")
}, function(error) {
   console.log(error.code);
   console.log(error.message);
});
            }
        </script>
    </head>
    <body>

       <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <a class="navbar-brand" href="#">
           <img src="./logodrone.png" width="50" height="50">DronArg
           </a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item active">
        <a class="nav-link" href="#">Menu <span class="sr-only">(current)</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="news">Novedades</a>
      </li>
        <li class="nav-item">
            <a class="nav-link" href="forum">Foro</a>
        </li>


    </ul>
    <form class="form-inline my-2 my-lg-0">
        <p id="nombre"></p>
        <img src="" id ="foto">
    </form>
  </div>
</nav>

<div class="container-fluid">           
    <div class="row">
        
        <div class="col-2" id="colizquierda">            
<div class="card text-white bg-dark mb-3" style="max-width: 20rem;">
  <div class="card-header">Novedades</div>
    <img class="card-img-top" src="./spark.jpg" alt="DJI Spark">
  <div class="card-body">
    <h4 class="card-title">Nuevo DJI Spark</h4>
    <p class="card-text">El nuevo drone de DJI,mas pequeño que todos,Y responde a gestos!</p>
      <a href="news" class="btn btn-primary">Leer</a>
  </div>
</div>
            <div class="card text-white bg-dark mb-3" style="max-width: 20rem;">
  <div class="card-header">Tienes dudas?Visita nuestro foro!</div>
    <img class="card-img-top" src="./logoforo.png" alt="DJI Spark">
  <div class="card-body">
    <h4 class="card-title">Visita el foro de DronArg</h4>
    <p class="card-text">En el foro de DronArg puedes realizar consultas,publicar imagenes y recomendar lugares para volar!</p>
      <a href="forum" class="btn btn-primary">Ir al foro</a>
  </div>
          
    </div>
        </div>
        <div class="col-8" id="colmedio">
                       <div class="card text-white bg-dark mb-3">
  <div class="card-header">Fotos del mes</div>
  <div class="card-body">
        <div id="my-carousel" class="carousel slide" data-ride="carousel">
  <ol class="carousel-indicators">
    <li data-target="#my-carousel" data-slide-to="0" class="active"></li>
    <li data-target="#my-carousel" data-slide-to="1"></li>
  </ol>
  <div class="carousel-inner">
    <div class="carousel-item active">
      <img class="d-block w-100" src="./imagen1.jpg" alt="First slide">
                <div class="carousel-caption d-none d-md-block">
    <h3 id="epigrafe">Fotos del mes</h3>
    <p>...</p>
  </div>
    </div>
    <div class="carousel-item">
      <img class="d-block w-100" src="./imagen2.jpg" alt="Second slide">
        <div class="carousel-caption d-none d-md-block">
    <h3 id="epigrafe">Fotos del mes</h3>
    <p>...</p>
  </div>
    </div>
  </div>
  <a class="carousel-control-prev" href="#my-carousel" role="button" data-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="carousel-control-next" href="#my-carousel" role="button" data-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
</div>
  </div>
</div>

        </div>
        <div class="col-2" id="colderecha">
    <div class="card text-white bg-dark mb-3" style="max-width: 20rem;">        
            <div class="card-header">Inicio de sesion</div>
        <div class="card-body">
            <div class="form-group">
  <label for="usr">Correo:</label>
  <input type="text" class="form-control" id="usr">
</div>
            <div class="form-group">
  <label for="pwd">Contraseña:</label>
  <input type="password" class="form-control" id="pwd">
</div>
        <button type="button" class="btn btn-primary" onclick="signInWithEmailAndPassword()">Ingresar</button>
        <button type="button" class="btn btn-primary" onclick="emailsignOut()">Salir</button>
            <p id="register">No estas registrado?<a href="#exampleModal" id="regisb"> Registrate.</a></p>
        </div>
        </div>
                <div class="card text-white bg-dark mb-3" style="max-width: 20rem;">        
            <div class="card-header">Iniciar sesion con Redes Sociales</div>
        <div class="card-body">
            <div class="form-group">
                <img src="logofacebook.png" width ="40" height="30">
                <button type="button" class="btn btn-primary" onclick = "facebookSignin()">Iniciar con Facebook</button>
</div>
            <div class="form-group">
                <img src="logogoogle.png" width ="30" height="30">
                <button type="button" class="btn btn-primary" onclick = "googleSignin()" id ="boton">Iniciar con Google</button>
</div>
        </div>
        </div>
      </div>
    </div>
    </div>

    </body>
</html>